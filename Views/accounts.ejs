<%- include('Partials/header.ejs') -%>

<header>
  <div class="left">
    <h1><i class="bi bi-bank"></i></h1>
  </div>
  <div class="right">
    <a class="btn btn-lg btn-outline-dark" href="/"
      ><i class="bi bi-box-arrow-left"></i
    ></a>
    <button
      type="button"
      class="btn btn-lg btn-dark"
      data-bs-toggle="modal"
      data-bs-target="#transaction"
    >
      <i class="bi bi-receipt"></i>
    </button>
  </div>
</header>
<img src="./images/bg.webp" alt="bg-image" />
<main class="accounts">
  <div
    class="modal fade"
    id="transaction"
    tabindex="-3"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content body-log">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">
            Transaction Logs
          </h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body message-log" id="log-context-container"></div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
            Close
          </button>
          <!-- <button type="button" class="btn btn-primary">Send message</button> -->
        </div>
      </div>
    </div>
  </div>
  <div class="table-wrapper-scroll-y my-custom-scrollbar table-container">
    <%if(error && error.length > 0){%>
    <div class="alert alert-danger"><%=error%></div>
      <%}%> <%if(success && success.length > 0){%>
    <div class="alert alert-success"><%=success%></div>
        <%}%>
    <table class="table table-bordered table-striped mb-0">
      <thead>
        <tr>
          <th>Account ID</th>
          <th>Account Name</th>
          <th>Account Number</th>
          <th>Account Balance</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% rows.forEach((element)=> { %>
        <tr>
          <td><%=element.account_id%></td>
          <td><%=element.account_name%></td>
          <td><%=element.account_number%></td>
          <td><%=element.account_balance%></td>
          <td>
            <a
              class="btn btn-outline-dark"
              href="/transaction/<%=element.account_number%> "
              ><i class="bi bi-arrow-right-square-fill"></i
            ></a>
            <a
              class="btn btn-outline-danger"
              href="/accounts/remove/<%=element.account_number%> "
              ><i class="bi bi-trash"></i
            ></a>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
  <div class="add-account-container">
    <a href="/accounts/remove-all" class="btn btn-danger"
      >Remove All <i class="bi bi-trash3"></i
    ></a>
    <a href="/accounts/add" class="btn btn-dark"
      >Add <i class="bi bi-plus-circle"></i
    ></a>
  </div>
</main>

<%- include('Partials/footer.ejs') -%>
